dependencies:
  cache_directories:
    - "~/.stack"
  pre:
    - curl -L https://github.com/commercialhaskell/stack/releases/download/v1.2.0/stack-1.2.0-linux-x86_64.tar.gz | sudo tar xz --wildcards --strip-components=1 -C /usr/bin '*/stack'
  override:
    - stack --no-terminal --skip-ghc-check setup
    - stack --no-terminal --skip-ghc-check build
    - stack --no-terminal --skip-ghc-check build --test --only-dependencies

test:
  override:
    - scripts/cibuild
